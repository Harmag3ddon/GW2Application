@namespace GW2Application.Shared

<MudDrawer @bind-Open="isOpen" Elevation="1" Width="@MainWindow.Width">
    <MudDrawerHeader>
        @if (string.IsNullOrEmpty(MainWindow.Width))
        {
            <MudAvatar Color="Color.Dark" Image="images/logo.png"/>
        }
        @if (string.IsNullOrEmpty(MainWindow.Width))
        {
            <MudText Typo="Typo.h6" Color="Color.Default" Style="margin=top:-5px; margin-left:15px;">Title Change</MudText>
        }
    </MudDrawerHeader>
    <MudNavMenu Dense="true" Class="mud-MainWindow.Width-full">
        @if(string.IsNullOrEmpty(MainWindow.Width))
        {
            <MudText Typo="Typo.body2" Class="px4 mud-text-secondary">Title to change</MudText>
        }
        <MudDivider Class="my-2"/>
        <MudNavLink Href="/1" Icon="@Icons.Material.Filled.Dashboard" IconColor="Color.Warning">@(!string.IsNullOrEmpty(MainWindow.Width) ? "" : "Page 1")</MudNavLink>
        <MudNavLink Href="/2" Icon="@Icons.Material.Filled.List" IconColor="Color.Warning">@(!string.IsNullOrEmpty(MainWindow.Width) ? "" : "Page 2")</MudNavLink>
        <MudNavLink Href="/3" Icon=@BlackLionTradingCompanyIcon>@(!string.IsNullOrEmpty(MainWindow.Width) ? "" : "BLTC")</MudNavLink>
    
    </MudNavMenu>

    <MudSpacer/>
        <MudIconButton Variant="Variant.Filled" Icon="@Icons.Material.Filled.Menu" Color="Color.Surface" OnClick="ShrinkMenu" Size="Size.Small"/>
</MudDrawer>

@code{
    private const string BlackLionTradingCompanyIcon =
    "<image width=\"20\" height=\"25\" xlink:href=\"images/BLTC.png\" />";

    [Parameter] public MainLayout MainLayout {get; set;}
    private bool isOpen = true;
    private string customIcon = null;

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        MainLayout.NavMenu = this;
        //customIcon = ReadSVG();
    }

    private async Task ShrinkMenu()
    {
        await MainLayout.ToggleMenu();
    }
    public void Refresh()
    {
        StateHasChanged();
    }

}